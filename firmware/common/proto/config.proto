// Runtime configuration protocol for DOMES firmware
// Shared between firmware (nanopb) and host CLI (prost)
syntax = "proto3";
package domes.config;

// Status codes for responses
enum Status {
    STATUS_OK = 0;
    STATUS_ERROR = 1;
    STATUS_INVALID_FEATURE = 2;
    STATUS_BUSY = 3;
}

// Runtime-toggleable features
enum Feature {
    FEATURE_UNKNOWN = 0;
    FEATURE_LED_EFFECTS = 1;
    FEATURE_BLE_ADVERTISING = 2;
    FEATURE_WIFI = 3;
    FEATURE_ESP_NOW = 4;
    FEATURE_TOUCH = 5;
    FEATURE_HAPTIC = 6;
    FEATURE_AUDIO = 7;
}

// Feature with its current state
message FeatureState {
    Feature feature = 1;
    bool enabled = 2;
}

// Request messages
message ListFeaturesRequest {
    // Empty - lists all features
}

message SetFeatureRequest {
    Feature feature = 1;
    bool enabled = 2;
}

// Response messages
message ListFeaturesResponse {
    repeated FeatureState features = 1;
}

message SetFeatureResponse {
    FeatureState feature = 1;
}

// Top-level request envelope
message ConfigRequest {
    oneof request {
        ListFeaturesRequest list_features = 1;
        SetFeatureRequest set_feature = 2;
    }
}

// Top-level response envelope
message ConfigResponse {
    Status status = 1;
    oneof response {
        ListFeaturesResponse list_features = 2;
        SetFeatureResponse set_feature = 3;
    }
}
